<launch>

	<!-- launch minimal -->
	<include file="$(find turtlebot_bringup)/launch/minimal.launch">
		<!-- any potential arguments go here; need to check if 3D goes on by default or not -->	
	</include>

	<!-- launch 3D sensor -->
	<include file="$(find tbot2_launch)/launch/3dsensor.launch">
		<arg name="scan_topic" default="scan_ppl"/>
	</include>
	
	<!-- launch lidar sensor and tf-->
	<node name="lidar_tf_broadcaster" pkg="tbot2_sensors" type="rplidar_frame_broadcaster"/>
	<include file="$(find tbot2_sensors)/launch/rplidar.launch">
	</include>
	
	<!-- launch usb cam -->
	<node name="usb_cam" pkg="usb_cam" type="usb_cam_node" output="screen" >
		<param name="video_device" value="/dev/video1" />
		<param name="image_width" value="640" />
		<param name="image_height" value="480" />
		<param name="pixel_format" value="yuyv" />
		<param name="camera_frame_id" value="usb_cam" />
		<param name="io_method" value="mmap"/>
		<remap from="/usb_cam/image_raw" to="/usb_cam/rgb/image_raw"/>
	</node>
	<node name="image_view" pkg="image_view" type="image_view" respawn="false" output="screen">
		<remap from="image" to="/usb_cam/rgb/image_raw"/>
		<param name="autosize" value="true" />
	</node>
	
	<!-- launch sound_play so the robot can speak -->
	<node name="soundplay_node" pkg="sound_play" type="soundplay_node.py"/>
	
	<!-- launch filters -->
	<include file="$(find tbot2_filters)/launch/tbot2_filters.launch">
	</include>
	
	<!-- launch sensor arduino code -->
	<node pkg="rosserial_python" type="serial_node.py" name="serial_node">
		<param name="port" value="/dev/ttyACM0"/>
	</node>
	
	<!-- launch amcl navigation -->
	<include file="$(find tbot2_launch)/launch/amcl_navigation.launch">
	</include>
	
	<!-- launch leg detection -->
	<node pkg="leg_detector" type="leg_detector" name="leg_detector" args="scan:=scan_ppl $(find legdetection_test)/config/coffee_leg_detection.yaml" output="screen">
		<param name="leg_reliability_limit" value="0.99" />
	</node>
	
	<!-- launch cb_face_detector -->
	<node pkg="legdetection_test" type="cb_face_detector" name="cb_face_detector">
	</node>
	
	<!-- launch logging -->
	<include file="$(find tbot2_launch)/launch/logging.launch">
	</include>
	
</launch>
